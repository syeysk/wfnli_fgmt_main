<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="width=device-width">
        <title>WI-FI-Ночник "Инфинити" v0.1</title>
        <script src="webif_libs/functions_embedded.js"> </script>
        <script src="webif_libs/functions_wfnli.js"> </script>
        <link rel="stylesheet" type="text/css" href="index.css">

    </head>
    <body>
        
        <div class="navpanel">
            <div data-content="managing">Управление</div>
            <div data-content="set">Настройки</div>
        </div>

        <div class="content" id="content_managing">
            <div>
                <input type="button" value='вкл/выкл' data-value='0' class='turn_button' id="managing_btn_turn"><br>
                Цвет: <input type="color" value='#ffffff' onchange="console.log(this.value);" id="managing_btn_color"><br>
                Яркость: <input type="" value="0" id="managing_btn_brightness"> <br>
            </div>
            <div style="text-align:left;">
                <br>
                <b>Статистика</b>
                <br>
                <table>
                    <tr>
                        <td>Время работы: </td><td> <span id="stat_time"> </span></td>
                    </tr><tr>
                        <td>Текущее время модуля: </td><td> <span id="stat_rtc"> </span></td>
                    </tr><tr>
                        <td>Текущее время браузера: </td><td> <span id="stat_rtc_browser"> </span></td>
                    </tr><!--<tr>
                        <td>Текущее время сети: </td><td> <span id="stat_rtc"> </span></td>
                    </tr>--><tr>
                        <td>Напряжение: </td><td> <span id="stat_vcc"> </span> V </td>
                    </tr>
                </table>
            </div>
        </div>

        <div class="content" id="content_set">
            <form id="form_wifi_mode" onchange="sendform(this, 'settings_mode');">
                <fieldset><legend>Режим работы</legend>
                    <label> <input type='radio' name='wifi_mode' value='1'> Клиент </label>
                    <label> <input type='radio' name='wifi_mode' value='0'> Точка доступа </label>
                    <label> <input type='radio' name='wifi_mode' value='2'> Оба варианта </label>
                </fieldset>
            </form>
        
            <br>

            <form class='settings' id="form_device_name">
                <fieldset><legend>Имя устройства</legend>
            
                <table>
                    <tr>
                        <td> <input type="text" name='device_name'> </td> <td> <input type='button' value='Сохранить' onclick="sendform(this, 'settings_device_name')"> </td>
                    </tr>
                </table>
                
                </fieldset>
            </form>

            <br>
            
            <form class='settings' id="form_wifi_wifi">
                <fieldset><legend>Настройки WI-FI</legend>
            
                <br><b>Точка доступа</b><br>
                <table>
                    <tr>
                        <td>Имя сети:</td> <td> <input type="text" name='ssidAP'> </td>
                    </tr>
                    <tr>
                        <td> Пароль: </td> <td> <input type="text" name='passwordAP' minlength="8"> </td>
                    </tr>
                </table>

                <br><b>Клиент</b><br>
                <table>
                    <tr>
                        <td>Имя сети:</td> <td> <input type="text" name='ssid'> </td>
                    </tr>
                    <tr>
                        <td>Пароль: </td> <td> <input type="text" name='password'> </td>
                    </tr>
                </table>
                
                <br>
                
                <input type='button' value='Сохранить' onclick="sendform(this, 'settings')">

                </fieldset>
            </form>

            <br>
            
            <form id="form_rtc">
            
                <fieldset><legend>Настройки часов</legend>
                
                <input type="hidden" name="seconds" value="0">

                <table>
                    <tr>
                        <td> Дата: </td><td> <input type="date" name="date"> </td> <!--<input type="text" name="year" size="4"> - <input type="text" name="month" size="2"> - <input type="text" name="day" size="2">-->
                    </tr>
                    <tr>
                        <td> Время: </td><td> <input type="time" name="time"> </td> <!--<input type="text" name="h" size="2"> : <input type="text" name="m" size="2"> : <input type="text" name="s" size="2">-->
                    </tr>
                </table>

                <br><br>
                
                <input type='button' value='Сохранить' onclick="sendform(this, 'settings_time', {data:{source:'hand'}})">
                <!--<input type='button' value='Обновить время через Интернет' onclick="sendform(this, 'settings_time', {data:{source:'ntp'}})">-->
                <input type='button' value='Взять время из браузера и сохранить' onclick="{let d = get_rtc_browser(); console.log(d); this.form.date.value=d.date; this.form.time.value=d.time.slice(0, -3); this.form.seconds.value=d.time.slice(-2)}; sendform(this, 'settings_time', {data:{source:'browser'}})">
               
                </fieldset>
            
            </form>
            
            <br>
            
            <form id="form_other">
                <fieldset><legend>Прочее</legend>
                
                    Период обновления страницы: <input type="number" name='update_time' style="width:100px;"> мс
                    <input type='button' value='Сохранить' onclick="sendform(this, 'settings_other')">
                    <br>
                
                    <div style="color:#9a1515;">
                        <input type="button" value="Сбросить настройки" onclick="if (confirm('Настройки будут безвозвратно сброшены на заводские. Продолжить?')) sendform(this, 'settings_reset', {func_success: function() {alert('Настройки сброшены. Перезагрузите устройство.');}});">
                        <input type="button" value="Перезапустить" onclick="if (confirm('Устройство будет перезапущено. Продолжить?')) sendform(this, 'settings_reboot', {func_after_load: function() {alert('Устройство перезапущено. Через несколько секунд обновите данную страницу.');}});">
                   </div>
                </fieldset>
            </form>

        </div>

        <!--<div class="content" id="content_dev">
        </div>-->
        
        <script src="after_load.js"> </script>
        
        
        
    </body>
</html>